{"version":3,"sources":["qcm-creator.coffee"],"names":[],"mappings":"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","file":"compiled.coffee.js","sourcesContent":["class QCM\n    constructor: (options, selectors) ->\n        @options =\n            questionsNumber         : 0,\n            defaultQuestionsNumber  : 1,\n            answersNumberPerQuestion: 4\n\n        @selectors =\n            form             : '',\n            container        : '',\n            template         : '',\n            btnAddQuestion   : '',\n            btnRemoveQuestion: '',\n\n        @messages =\n            NOT_ENOUGH_QUESTIONS: \"Le QCM doit être constitué d'au moins d'une question\"\n\n        @options = Object.assign {}, @options, options;\n        @selectors = Object.assign {}, @selectors, selectors;\n\n        return\n\n    init: ->\n        @answers = [ 0..@options.answersNumberPerQuestion ]\n        @_setUpSelectors()\n        @_parseTemplate()\n        @_setUpDefaultQuestions()\n        @_setUpEvents()\n\n        return\n\n    _setUpSelectors: ->\n        setup = (selector) =>\n            this[ '$' + selector ] = $ @selectors[ selector ]\n\n        setup selector for selector in Object.keys(@selectors)\n\n        @$body = $ document.body\n\n        return\n\n    _parseTemplate: ->\n        Mustache.parse @$template.html()\n\n    _setUpDefaultQuestions: ->\n        @addQuestion(null, false) for [ 0...@options.defaultQuestionsNumber ]\n        return\n\n    _setUpEvents: ->\n        @$form.on 'click', @selectors.btnAddQuestion, (event) =>\n            @addQuestion.apply this, [event, true]\n\n        @$form.on 'click', @selectors.btnRemoveQuestion, (event) =>\n            @deleteQuestion.apply this, [event]\n\n        $(document).on 'submit', @selectors.form, (event) =>\n            if(@options.questionsNumber < 1)\n                event.preventDefault()\n                alert @messages.NOT_ENOUGH_QUESTIONS\n\n        return\n\n    addQuestion: (event, animate) ->\n        $div = $ '<div>'\n        .data 'question', @options.questionsNumber\n        .addClass 'question'\n        .hide()\n        .html Mustache.render @$template.html(),\n            questionNumber       : @options.questionsNumber,\n            questionNumberDisplay: @options.questionsNumber + 1\n            answers              : @answers\n        .appendTo @$container\n\n        if animate\n            $div.slideDown 250\n            @$body.animate\n                scrollTop: $div.offset().top\n            , 250\n        else\n            $div.show()\n\n        @options.questionsNumber++\n\n        return\n\n    deleteQuestion: (event) ->\n        $element = $ event.currentTarget\n        $question = $element.parents '.question'\n        $nextQuestion = $question.next()\n\n        if @options.questionNumber - 1 <= 0\n            event.preventDefault()\n            return alert @messages.NOT_ENOUGH_QUESTIONS\n\n        @options.questionsNumber--\n\n        $question.slideUp 250, $question.remove\n\n        while $nextQuestion.length != 0\n            newId = parseInt($nextQuestion.data 'question', 10) - 1\n            $nextQuestion.data 'question', newId\n            $nextQuestion.find('.questionNumberDisplay').text newId + 1\n            $nextQuestion = $nextQuestion.find()\n\n        return\n"],"sourceRoot":"/source/"}